<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SlowWork - ‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ü‡∏£‡∏µ‡πÅ‡∏•‡∏ô‡∏ã‡πå‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js";

        // üî¥ 1. ‡∏ß‡∏≤‡∏á Firebase Config ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT.firebaseapp.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT.appspot.com",
            messagingSenderId: "YOUR_ID",
            appId: "YOUR_APP_ID"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const storage = getStorage(app);

        // --- ‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡∏∂‡∏á‡∏á‡∏≤‡∏ô‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡πÇ‡∏ä‡∏ß‡πå (Real-time) ---
        const jobGrid = document.getElementById('job-grid-dynamic');
        const q = query(collection(db, "jobs"), orderBy("createdAt", "desc"));
        
        onSnapshot(q, (snapshot) => {
            jobGrid.innerHTML = ''; 
            snapshot.forEach((doc) => {
                const job = doc.data();
                jobGrid.innerHTML += `
                    <div class="job-card" onclick="openModal('hireModal')">
                        <img src="${job.image}" class="job-img">
                        <div class="job-info">
                            <div class="job-title">${job.title}</div>
                            <div class="freelancer-name"><i class="fas fa-user-circle"></i> ${job.freelancer}</div>
                            <div class="job-price" style="margin-top:10px;">‡∏ø${job.price}</div>
                        </div>
                    </div>
                `;
            });
        });

        // --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏á‡∏≤‡∏ô ---
        window.handleUploadWork = async () => {
            const title = document.getElementById('workTitle').value;
            const price = document.getElementById('workPrice').value;
            const imageFile = document.getElementById('workImage').files[0];
            const btn = document.getElementById('uploadBtn');

            if (!title || !price || !imageFile) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏£‡∏±‡∏ö");

            btn.innerText = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î...";
            btn.disabled = true;

            try {
                const storageRef = ref(storage, 'jobs/' + Date.now() + "_" + imageFile.name);
                await uploadBytes(storageRef, imageFile);
                const imageURL = await getDownloadURL(storageRef);

                await addDoc(collection(db, "jobs"), {
                    title: title,
                    price: price,
                    image: imageURL,
                    freelancer: document.getElementById('display-name').innerText,
                    createdAt: new Date()
                });

                alert("‡∏•‡∏á‡∏Ç‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");
                closeAllModals();
                btn.innerText = "‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏á‡∏Ç‡∏≤‡∏¢‡∏á‡∏≤‡∏ô";
                btn.disabled = false;
            } catch (error) {
                alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: " + error.message);
            }
        };
    </script>

    <style>
        :root { --primary-green: #28a745; --primary-orange: #FF8A00; --text-dark: #333; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Kanit', sans-serif; }
        body { background-color: var(--primary-orange); transition: 0.4s; color: var(--text-dark); }
        
        nav { background: white; padding: 10px 8%; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .logo { font-size: 24px; font-weight: 700; color: var(--primary-orange); cursor: pointer; }
        .logo span { color: var(--primary-green); }

        .container { max-width: 1100px; margin: 25px auto; padding: 0 20px; }
        .card { background: white; border-radius: 15px; padding: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); margin-bottom: 20px; }

        /* Job Grid Style */
        .job-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; margin-top: 20px; }
        .job-card { background: white; border-radius: 12px; overflow: hidden; transition: 0.3s; cursor: pointer; border: 1px solid #eee; }
        .job-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .job-img { width: 100%; height: 160px; object-fit: cover; background: #f0f0f0; }
        .job-info { padding: 15px; }
        .job-title { font-weight: 600; font-size: 15px; height: 45px; overflow: hidden; }
        .job-price { color: var(--primary-green); font-weight: 700; font-size: 18px; }

        /* Buttons & Modals */
        .btn-main { background: var(--primary-green); color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer; width: 100%; font-weight: 600; }
        .btn-outline { border: 1.5px solid var(--primary-green); color: var(--primary-green); background: white; padding: 10px; border-radius: 8px; cursor: pointer; }
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); display: none; align-items: center; justify-content: center; z-index: 2000; }
        .modal-content { background: white; padding: 30px; border-radius: 20px; width: 90%; max-width: 450px; }
        
        input, textarea { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; }
        #dashboard-content { display: none; }
    </style>
</head>
<body>

    <nav>
        <div class="logo" onclick="location.reload()"><span>Slow</span>Work</div>
        <div id="nav-guest">
            <button class="btn-outline" onclick="openModal('loginModal')">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
        </div>
        <div id="nav-user" style="display: none; align-items: center; gap: 15px;">
            <img id="user-pic-nav" src="" style="width:35px; border-radius:50%;">
            <span>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ, <strong id="display-name">‡∏Ñ‡∏∏‡∏ì</strong></span>
            <button onclick="logout()" style="color:red; border:none; background:none; cursor:pointer;"><i class="fas fa-power-off"></i></button>
        </div>
    </nav>

    <div id="main-content" class="container">
        <div class="card" style="text-align:center; background: linear-gradient(to right, #fff, #f9f9f9);">
            <h1>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ü‡∏£‡∏µ‡πÅ‡∏•‡∏ô‡∏ã‡πå‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à</h1>
            <p>‡πÅ‡∏´‡∏•‡πà‡∏á‡∏£‡∏ß‡∏°‡∏Ñ‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</p>
        </div>

        <h2 style="color: white; margin-bottom: 15px;">‡∏á‡∏≤‡∏ô‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h2>
        <div class="job-grid" id="job-grid-dynamic">
            <p style="color: white;">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏á‡∏≤‡∏ô...</p>
        </div>
    </div>

    <div id="dashboard-content" class="container">
        <div class="card" style="border-left: 5px solid var(--primary-green);">
            <h2>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡πÅ‡∏ú‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°</h2>
            <p>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡∏∞‡∏•‡∏á‡∏Ç‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</p>
            <button class="btn-main" style="margin-top:15px; width:auto; padding: 10px 25px;" onclick="openModal('uploadWorkModal')">
                <i class="fas fa-plus"></i> ‡∏•‡∏á‡∏Ç‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà
            </button>
        </div>
    </div>

    <div id="loginModal" class="modal-overlay">
        <div class="modal-content" style="text-align:center;">
            <h2>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h2>
            <p style="margin-bottom:20px; color:#666;">‡πÉ‡∏ä‡πâ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ Google ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</p>
            <div id="g_id_onload"
                 data-client_id="YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com"
                 data-callback="handleCredentialResponse">
            </div>
            <div class="g_id_signin" data-type="standard" data-shape="pill"></div>
            <br>
            <button onclick="closeAllModals()" style="border:none; background:none; color:#999; cursor:pointer;">‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á</button>
        </div>
    </div>

    <div id="uploadWorkModal" class="modal-overlay">
        <div class="modal-content">
            <h3>‡∏•‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô</h3>
            <input type="text" id="workTitle" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏≤‡∏ô ‡πÄ‡∏ä‡πà‡∏ô ‡∏£‡∏±‡∏ö‡∏ó‡∏≥‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏±‡∏á‡∏Ñ‡∏° ‡∏°.‡∏ï‡πâ‡∏ô">
            <input type="number" id="workPrice" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡∏ö‡∏≤‡∏ó)">
            <label>‡∏£‡∏π‡∏õ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏á‡∏≤‡∏ô:</label>
            <input type="file" id="workImage" accept="image/*" onchange="previewImg(event)">
            <img id="p-img" style="width:100%; display:none; border-radius:10px; margin-bottom:10px;">
            <button class="btn-main" id="uploadBtn" onclick="handleUploadWork()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏á‡∏Ç‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</button>
            <button onclick="closeAllModals()" class="btn-outline" style="width:100%; margin-top:10px;">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        </div>
    </div>

    <div id="hireModal" class="modal-overlay">
        <div class="modal-content">
            <h3>‡∏™‡∏ô‡πÉ‡∏à‡∏à‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ?</h3>
            <p>‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏ó‡∏±‡∏Å‡πÅ‡∏ä‡∏ó‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡∏ü‡∏£‡∏µ‡πÅ‡∏•‡∏ô‡∏ã‡πå</p>
            <button class="btn-main" style="margin-top:15px;" onclick="copyAndChat()">‡∏ó‡∏±‡∏Å‡πÅ‡∏ä‡∏ó Messenger</button>
            <button onclick="closeAllModals()" class="btn-outline" style="width:100%; margin-top:10px;">‡∏Å‡∏•‡∏±‡∏ö</button>
        </div>
    </div>

    <script>
        function openModal(id) { document.getElementById(id).style.display = 'flex'; }
        function closeAllModals() { document.querySelectorAll('.modal-overlay').forEach(m => m.style.display = 'none'); }

        function previewImg(e) {
            const p = document.getElementById('p-img');
            p.src = URL.createObjectURL(e.target.files[0]);
            p.style.display = 'block';
        }

        function handleCredentialResponse(response) {
            const user = JSON.parse(atob(response.credential.split('.')[1]));
            document.getElementById('display-name').innerText = user.name;
            document.getElementById('user-pic-nav').src = user.picture;
            
            document.getElementById('nav-guest').style.display = 'none';
            document.getElementById('nav-user').style.display = 'flex';
            document.getElementById('dashboard-content').style.display = 'block';
            document.body.style.backgroundColor = "#f0f2f5";
            closeAllModals();
        }

        function logout() { location.reload(); }

        function copyAndChat() {
            navigator.clipboard.writeText("‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏™‡∏ô‡πÉ‡∏à‡∏á‡∏≤‡∏ô‡πÉ‡∏ô SlowWork ‡∏Ñ‡∏£‡∏±‡∏ö").then(() => {
                alert("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÑ‡∏õ‡∏ó‡∏µ‡πà Messenger...");
                window.location.href = "https://m.me/61586735639400";
            });
        }
    </script>
</body>
</html>
