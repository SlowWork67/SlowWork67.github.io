<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>Post Job | JobBoard</title>

  <style>
    * {
      box-sizing: border-box;
      font-family: "Segoe UI", Tahoma, sans-serif;
    }

    body {
      margin: 0;
      background-color: #f5f7f6;
      color: #333;
    }

    :root {
      --green-soft: #cfe8d9;
      --green-main: #5fb3a2;
      --orange-soft: #ffe2c6;
      --orange-main: #f4a261;
      --border-soft: #e0e0e0;
    }

    .header {
      width: 100%;
      background: linear-gradient(
        90deg,
        var(--green-soft),
        var(--orange-soft)
      );
      padding: 16px 32px;
      display: flex;
      align-items: center;
      gap: 12px;
      border-bottom: 1px solid var(--border-soft);
    }

    .logo {
      width: 42px;
      height: 42px;
      background-color: var(--green-main);
      color: white;
      font-weight: bold;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .site-name {
      font-size: 22px;
      font-weight: 600;
    }

    .site-name .slow {
      color: var(--green-main);
    }

    .site-name .work {
      color: var(--orange-main);
    }

    .container {
      max-width: 900px;
      margin: 32px auto;
      padding: 0 20px;
    }

    .notice-box {
      background-color: var(--orange-soft);
      border: 2px solid var(--orange-main);
      color: #a85a1a;
      padding: 14px 18px;
      border-radius: 10px;
      font-weight: 600;
      margin-bottom: 24px;
    }

    .card {
      background-color: #ffffff;
      border-radius: 14px;
      padding: 28px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.06);
    }

    .card h2 {
      margin-top: 0;
      margin-bottom: 20px;
      color: var(--green-main);
    }

    .form-group {
      margin-bottom: 18px;
    }

    label {
      display: block;
      margin-bottom: 6px;
      font-weight: 500;
    }

    input[type="text"],
    input[type="number"],
    input[type="date"],
    textarea,
    select {
      width: 100%;
      padding: 12px 14px;
      border-radius: 10px;
      border: 1px solid var(--border-soft);
      outline: none;
      font-size: 14px;
    }

    textarea {
      resize: vertical;
      min-height: 100px;
    }

    input:focus,
    textarea:focus,
    select:focus {
      border-color: var(--green-main);
    }

    .job-type {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 14px;
      margin-top: 10px;
    }

    .job-option {
      border: 2px solid var(--border-soft);
      border-radius: 12px;
      padding: 14px;
      text-align: center;
      cursor: pointer;
      transition: 0.2s;
      background-color: #fff;
    }

    .job-option input {
      display: none;
    }

    .job-option:hover {
      border-color: var(--orange-main);
      background-color: var(--orange-soft);
    }

    .job-option input:checked + span {
      color: white;
      background-color: var(--orange-main);
      padding: 8px 12px;
      border-radius: 20px;
    }

    .button-group {
      display: flex;
      gap: 14px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .back-btn {
      flex: 1;
      padding: 14px;
      border-radius: 12px;
      border: 2px solid var(--border-soft);
      background-color: #fff;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
    }

    .submit-btn {
      flex: 1;
      padding: 14px;
      border-radius: 12px;
      border: none;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      color: white;
      background: linear-gradient(
        90deg,
        var(--green-main),
        var(--orange-main)
      );
    }

    .submit-btn:hover,
    .back-btn:hover {
      opacity: 0.9;
    }
  </style>
</head>

<body>

  <div class="header">
    <div class="logo">JB</div>
    <div class="site-name">
      <span class="slow">Slow</span><span class="work">Work</span>
    </div>
  </div>

  <div class="container">

    <div class="notice-box">
      โปรดกรอกข้อมูลให้ครบถ้วนและถูกต้อง เพื่อให้ผู้รับงานเข้าใจรายละเอียดงานได้ชัดเจน
    </div>

    <div class="card">
      <h2>ลงประกาศงานใหม่</h2>

      <div class="form-group">
        <label>ชื่องาน</label>
        <input type="text" name="title" placeholder="เช่น Web Designer">
      </div>

      <div class="form-group">
        <label>รายละเอียดงาน</label>
        <textarea name="description" placeholder="อธิบายลักษณะงาน ความรับผิดชอบ ฯลฯ"></textarea>
      </div>

      <div class="form-group">
        <label>ตัวอย่างผลงาน</label>
        <input type="text" placeholder="ลิงก์ผลงาน / Google Drive / Behance">
      </div>

      <div class="form-group">
        <label>หมวดหมู่งาน</label>
        <select name="category">
          <option value="">เลือกหมวดหมู่</option>
          <option>ออกแบบกราฟิก</option>
          <option>เขียนโปรแกรม</option>
          <option>เขียนบทความ</option>
          <option>ตัดต่อวิดีโอ</option>
          <option>อื่นๆ</option>
        </select>
      </div>

      <div class="form-group">
        <label>งบประมาณ (บาท)</label>
        <input type="number" name="budget" placeholder="เช่น 5000">
      </div>

      <div class="form-group">
        <label>กำหนดส่งงาน</label>
        <input type="date" name="deadline">
      </div>

      <div class="form-group">
        <label>ลักษณะการจ้าง</label>
        <div class="job-type">
          <label class="job-option">
            <input type="radio" name="type" value="ฟรีแลนซ์">
            <span>ฟรีแลนซ์</span>
          </label>
          <label class="job-option">
            <input type="radio" name="type" value="สัญญาจ้าง">
            <span>สัญญาจ้าง</span>
          </label>
          <label class="job-option">
            <input type="radio" name="type" value="พาร์ทไทม์">
            <span>พาร์ทไทม์</span>
          </label>
          <label class="job-option">
            <input type="radio" name="type" value="งานประจำ">
            <span>งานประจำ</span>
          </label>
        </div>
      </div>

      <div class="button-group">
        <button class="back-btn" onclick="window.location.href='jobboard.html'">
          ย้อนกลับ
        </button>
        <button type="button" class="submit-btn">โพสต์งาน</button>
      </div>
    </div>

  </div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
const SUPABASE_URL = "https://zjnwuujlpitsysetqqmv.supabase.co";
const SUPABASE_ANON_KEY = "sb_publishable_ufGfq44Aiz0T6kYRlwZhIQ_5uleFb3r";

const supabaseClient = window.supabase.createClient(
  SUPABASE_URL,
  SUPABASE_ANON_KEY
);

document.querySelector('.submit-btn').addEventListener('click', async () => {

  const title = document.querySelector('input[placeholder*="Web"]').value;
  const description = document.querySelector('textarea').value;
  const category = document.querySelector('select').value;
  const budget = document.querySelector('input[type="number"]').value;
  const deadline = document.querySelector('input[type="date"]').value;

  const type = document.querySelector(
    'input[name="jobtype"]:checked'
  )?.nextElementSibling.innerText || "";

  if (!title || !description || !category) {
    alert("กรุณากรอกข้อมูลให้ครบ");
    return;
  }

  const { error } = await supabaseClient
    .from("jobs")
    .insert([{
      title,
      description,
      category,
      type,
      budget,
      deadline
    }]);

  if (error) {
    alert("โพสต์งานไม่สำเร็จ");
    console.error(error);
    return;
  }

  // กลับหน้า jobboard หลังโพสต์สำเร็จ
  window.location.href = "jobboard.html";
});
</script>


</body>
</html>
