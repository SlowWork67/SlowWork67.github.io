<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏á‡∏≤‡∏ô</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;600&display=swap" rel="stylesheet">
    <style>body { font-family: 'Kanit', sans-serif; }</style>
</head>
<body class="bg-gray-100 p-6">
    <div class="max-w-xl mx-auto bg-white p-8 rounded-3xl shadow-lg mt-10">
        <button onclick="window.history.back()" class="text-blue-600 mb-4 font-bold">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
        <h1 class="text-2xl font-bold mb-6">‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì üõ†Ô∏è</h1>
        <div class="space-y-4">
            <input type="text" id="title" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô (‡πÄ‡∏ä‡πà‡∏ô ‡∏£‡∏±‡∏ö‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÇ‡∏•‡πÇ‡∏Å‡πâ)" class="w-full border p-3 rounded-xl outline-none focus:border-blue-500">
            <input type="number" id="price" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡∏ö‡∏≤‡∏ó)" class="w-full border p-3 rounded-xl outline-none focus:border-blue-500">
            <textarea id="desc" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô..." rows="4" class="w-full border p-3 rounded-xl outline-none focus:border-blue-500"></textarea>
            <input type="text" id="img_url" placeholder="Link ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ú‡∏•‡∏á‡∏≤‡∏ô" class="w-full border p-3 rounded-xl outline-none focus:border-blue-500">
            <button onclick="postJob()" class="w-full bg-blue-600 text-white py-4 rounded-xl font-bold text-lg hover:bg-blue-700 transition">‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏•‡∏¢</button>
        </div>
    </div>

    <script>
        const SUPABASE_URL = 'https://zxubzigylpalejienmzi.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp4dWJ6aWd5bHBhbGVqaWVubXppIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzExMjA2MzIsImV4cCI6MjA4NjY5NjYzMn0.3RMM9deY0Cu7y1QxphD2UllEnylAiOhTTftZelcKXYo';
        const _supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        async function postJob() {
            const title = document.getElementById('title').value;
            const price = document.getElementById('price').value;
            const description = document.getElementById('desc').value;
            const image_url = document.getElementById('img_url').value;

            if(!title || !price || !image_url) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");

            const { error } = await _supabase.from('jobs').insert([{ title, price, description, image_url }]);

            if(!error) {
                alert("‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");
                window.history.back(); // ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏î‡∏¥‡∏°
            } else {
                alert(error.message);
            }
        }
    </script>
</body>
</html>
